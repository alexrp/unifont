'\" t
.TH HEX2OTF 1 2022-03-19 "GNU Unifont"
.SH NAME
hex2otf \- Convert a GNU Unifont .hex file to an OpenType font
.SH SYNOPSIS
.B hex2otf
[\-\-help] [\-\-version]
.PP
.B hex2otf
\fIoperand\/\fP \&.\|.\|.\&
.SH DESCRIPTION
The
.B hex2otf
utility generates an OpenType font from a GNU Unifont .hex file.
.PP
.B hex2otf
reads a file in Unifont .hex file format, as specified with the
\fChex=\fP\fIfilename.hex\/\fP operand, and creates an OpenType
file as specified with the \fCout=\fP\fIfilename.otf\/\fP operand.
A combining character offset file may optionally be specified
with the \fCpos=\fP\fIcombining-file\/\fP operand.
.PP
TrueType and OpenType ID fields are specified with operands
of the form \fIid\/\fP=\fIstring\/\fP.
.PP
A dummy GPOS table can be generated with the \fCgpos\fP option.
The following subsection describes why this is beneficial.
.SS "GPOS RATIONALE"
A dummy GPOS table is useful for positioning combining characters consistently.
For example,
HarfBuzz will perform fallback mark positioning on certain conditions,
trying to put combining marks closer to their base characters.
But it does not work well with the blank outlines generated by this utility,
because blank outlines do not have relevant glyph extent values.
The dummy GPOS table contains no useful position information,
but its presence is enough for HarfBuzz to skip the fallback positioning.
However, both HarfBuzz and Uniscribe will still precompose characters before
rendering.
For example, \(lqa\\u0301\(rq is rendered exactly as the glyph of U+00E1
(LATIN SMALL LETTER A WITH ACUTE),
not the composite of two glyphs.
.SS "OUTPUT FORMAT CONSIDERATIONS"
The font format should be carefully chosen.
In general, using the \fBcff\fP and \fBgpos\fP operands
together will produce good results on GNU/Linux, *nix, Windows, and
macOS systems.  The current status of different formats is as follows:
.RS
.TP 6
CFF outline
May cause rendering issues in the Windows Command Prompt program.
.TP
CFF 2 outline
Not recognized by Windows.
.TP
TrueType outline
On Windows, this appears to be blurred in 16 pixels size due to the
ClearType anti-alias mechanism; this can be fixed by embedding bitmaps.
.TP
Bitmap-only
Contrary to the OpenType specification,
a bitmap-only font has to be accompanied by blank outlines to be recognized.
.RE
.SS "FUTURE DIRECTIONS"
Some font parameters are hard coded into the source code for convenience.
Other approaches may be preferable.
.PP
The generated fonts may produce incorrect result for vertical layout.
More font parameters might be necessary if such a need arises.
.PP
Font size may be reduced by using \fIe.g.\fP CFF subroutines and TrueType font
programs.
.SH OPTIONS
.TP 10
.B \-\-help
Print a brief help message and exit.
.TP
.B \-\-version
Print program version information and exit.
.SH OPERANDS
.TP 10
\fBhex\fP=\fIfile\/\fP
Specify the input hex file pathname.
.TP
\fBpos\fP=\fIfile\/\fP
Optional. Specify the combining position file pathname.
.TP
\fBout\fP=\fIfile\/\fP
Specify the output pathname.
.TP
\fBformat\fP=\fIword\/\fP[,\fIword\/ \fP\&.\|.\|.\&]
Specify the font format.
Each
.I word
shall be one of the following:
.RS
.TP 12
.B cff
Generate CFF outlines.
.TP
.B cff2
Generate CFF 2 outlines.
.TP
.B truetype
Generate TrueType outlines.
.TP
.B blank
Generate blank outlines.
Generating a font with only blank outlines is not allowed.
.TP
.B bitmap
Generate embedded bitmap.
Required if no outlines are generated.
.TP
.B gpos
Generate dummy GPOS table.
See the "GPOS RATIONALE" section above.
.TP
.B gsub
Generate generic GSUB table with two entries: "DFLT" and "thai".
"DFLT" improves glyph positioning in HarfBuzz, especially as
relates to glyph reordering.  "thai" directs HarfBuzz
.I not
to obtain Thai glyphs from the Unicode Private Use Area.
.RE
.TP
\fIid\fP=\fItext\/\fP
Specify font attributes.
.I id
shall be an decimal integer from 0 to 255,
corresponding to \(lqName ID\(rq as defined in the OpenType specification,
<https://docs.microsoft.com/en-us/typography/opentype/spec/name#name-ids>.
.I text
shall be value of the attribute in English (United States).
Characters beyond the ASCII range shall be encoded as UTF-8.
Currently defined attributes relevant to Unifont are briefly listed below.
Refer to the specification for full details.
.RS
.TP 6
.B ID
.B Meaning and Notes
.TP
0
Copyright notice.
.TP
1
Font family name.
.TP
2
Font subfamily name.  Should be \(lqRegular\(rq.
.TP
3
Unique font identifier.
.TP
4
Full font name.
.TP
5
Version string.  Should begin with \(lqVersion \fInumber.number\/\fP\(rq,
where each
.I number
is in the range of 0 to 65535.
.TP
6
PostScript name.  Less than 64 printable ASCII characters except those in
\(lq\fI[](){}<>/%\/\fP\(rq
.TP
7
Trademark.
.TP
8
Manufacturer name.
.TP
9
Designer.
.TP
10
Description.
.TP
11
Vendor URL.
.TP
12
Designer URL.
.TP
13
License description, in plain language.
.TP
14
License info URL.
.TP
18
Compatible full name; Macintosh only.
.TP
19
Sample text.
.RE
.SH "FONTFORGE NOTE"
Default FontForge package installations can incorrectly ignore the
Unicode plane of glyphs beyond Plane 0 in CID-keyed fonts (such as
are generated with the \fCformat=cff\fP option).  This is caused by
the presence of the file \fCAdobe-Identity-0.cidmap\fP, which FontForge
interprets incorrectly to determine Unicode code point glyph mappings
if present.  This file is located in \fC/usr/share/fontforge/cidmap\fP
or a similar directory on GNU/Linux systems.  Removing or renaming
\fCAdobe-Identity-0.cidmap\fP will cause FontForge to fall back
on OpenType cmap entries in the font.  FontForge will then correctly
display all Unicode code points.
.SH EXAMPLE
Sample usage:
.PP
.RS
.HP 6
\fChex2otf hex=unifont.hex pos=combining.txt \\
.br
format=cff,gpos,gsub out=unifont.otf\fP
.RE
.SH "EXIT STATUS"
Status values are defined in \fC<stdlib.h>\fP.
The program exits with status EXIT_SUCCESS upon successful font generation,
or EXIT_FAILURE if an error occurred.  If an error condition is encountered,
\fBhex2otf\fP writes a brief diagnostic message to STDERR; in this event,
the state of the output font file will be undefined.
.SH SEE ALSO
.BR unifont (5),
.BR hex2bdf (1)
.SH AUTHOR
.B hex2otf
was written by He Zhixiang.
.SH LICENSE
.B hex2otf
is Copyright \(co 2022 He Zhixiang.
.PP
This program is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation; either version 2 of the License, or
(at your option) any later version.

